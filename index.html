<!DOCTYPE html>
<html>

<head>
<title>Gas Monitor</title>
<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
</head>

<body>

<h2>Add Parameter</h2>

Name:
<input id="name"><br><br>

Register:
<input id="reg"><br><br>

<button onclick="send()">Configure</button>

<h2>Values</h2>
<div id="values"></div>

<script>

const client=mqtt.connect(
"wss://9623f16bf00e4cc69f0010261f43bf86.s1.eu.hivemq.cloud:8884/mqtt",
{
 username:"RITESH",
 password:"Ritesh@123"
});

client.on("connect",()=>{
 console.log("Web Connected");
 client.subscribe("data/#");
});

function send(){
 let n=document.getElementById("name").value;
 let r=document.getElementById("reg").value;

 client.publish("config/"+n,r);
 alert("Sent!");
}

client.on("message",(topic,msg)=>{

 let p=topic.split("/")[1];
 let val=msg.toString();

 document.getElementById("values").innerHTML=
 "<h3>"+p+" = "+val+"</h3>";
});

</script>

</body>

</html>
